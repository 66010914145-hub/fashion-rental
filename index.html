<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fashion Rental - ‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            box-sizing: border-box;
            font-family: 'Sarabun', sans-serif;
            background-color: #ffffff; 
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .hero-bg {
            /* ‡πÉ‡∏ä‡πâ URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏°‡πà */
            background-image: url('https://www.lookbook.in.th/wp-content/uploads/2018/05/IMG_9985-1050x630.jpg');
            background-size: cover;
            background-position: center; 
            position: relative;
            /* ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ö‡∏ô‡∏£‡∏π‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡∏°‡πà */
            color: #fff; 
            text-shadow: 1px 1px 4px rgba(0,0,0,0.7); 
        }
        .hero-bg > div {
            position: relative;
            z-index: 2;
        }
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bg-white"> 

    <header class="bg-pink-100 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 gradient-bg rounded-full flex items-center justify-center">
                        <span class="text-white font-bold text-lg">FR</span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800">Fashion Rental</h1>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#" class="text-gray-600 hover:text-purple-600 transition-colors">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                    <a href="#women" class="text-gray-600 hover:text-purple-600 transition-colors">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á</a>
                    <a href="#men" class="text-gray-600 hover:text-purple-600 transition-colors">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢</a>
                </nav>
                <div class="flex items-center space-x-4">
                    <button id="adminButton" class="text-sm px-3 py-1 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors">
                        Admin
                    </button>
                    <div class="relative flex items-center">
                        <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤..." class="hidden w-48 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 transition-all duration-300">
                        <button id="searchButton" class="p-2 text-gray-600 hover:text-purple-600 transition-colors" aria-label="Search">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                    </div>
                    <button id="cartButton" class="p-2 text-gray-600 hover:text-purple-600 transition-colors relative" aria-label="Shopping Cart">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L4.5 18M7 13h10m0 0l-2.5 5m-4.5-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01" />
                        </svg>
                        <span id="cartCounter" class="absolute -top-2 -right-2 bg-purple-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
                    </button>
                    <div class="relative">
                        <button id="userButton" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                        <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                            <a href="#" id="editProfileLink" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
                            <a href="#" id="orderHistoryLink" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤</a>
                            <a href="#" id="logoutButton" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main id="mainContent">
        <section id="hero-banner" class="hero-bg text-center py-24 md:py-36">
            <div class="container mx-auto px-4 fade-in">
                <h2 class="text-4xl md:text-6xl font-extrabold mb-4 drop-shadow-lg">‡πÄ‡∏ä‡πà‡∏≤‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏î‡∏±‡∏á ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠!</h2>
                <p class="text-xl md:text-2xl mb-8 font-light drop-shadow-lg">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∏‡∏î‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ ‡πÉ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡πå‡πÇ‡∏•‡∏Å</p>
                <button class="bg-purple-600 text-white font-bold px-8 py-3 rounded-full text-lg hover:bg-purple-700 transition-transform transform hover:scale-105 shadow-xl">
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏•‡∏¢
                </button>
            </div>
        </section>

        <section class="py-16 bg-white" id="categories">
            <div class="container mx-auto px-4">
                <h3 class="text-3xl font-bold text-center mb-12 text-gray-800">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 max-w-xl mx-auto">
                    <a href="#women" class="text-center card-hover cursor-pointer p-6 rounded-xl border border-gray-200">
                        <div class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-pink-400 to-purple-600 rounded-full flex items-center justify-center shadow-lg">
                            <span class="text-4xl">‚ôÄÔ∏è</span>
                        </div>
                        <h4 class="text-xl font-semibold mb-2 text-gray-800">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á</h4>
                        <p class="text-gray-600 text-sm">‡πÄ‡∏î‡∏£‡∏™ ‡πÄ‡∏™‡∏∑‡πâ‡∏≠ ‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á ‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á</p>
                    </a>
                    <a href="#men" class="text-center card-hover cursor-pointer p-6 rounded-xl border border-gray-200">
                        <div class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-full flex items-center justify-center shadow-lg">
                            <span class="text-4xl">‚ôÇÔ∏è</span>
                        </div>
                        <h4 class="text-xl font-semibold mb-2 text-gray-800">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢</h4>
                        <p class="text-gray-600 text-sm">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∑‡∏î ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡∏¥‡πâ‡∏ï ‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á</p>
                    </a>
                </div>
            </div>
        </section>

        <section id="rental-policy" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h3 class="text-3xl font-bold text-center mb-12 text-gray-800">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                    <div class="bg-white p-8 rounded-xl shadow-md border border-gray-200 text-center">
                        <div class="text-5xl mb-4">‚è±Ô∏è</div>
                        <h4 class="text-xl font-semibold text-gray-800 mb-2">‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤</h4>
                        <p class="text-gray-600">‡∏Å‡∏£‡∏ì‡∏µ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏•‡∏∞ <strong class="text-red-500">50 ‡∏ö‡∏≤‡∏ó</strong> ‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô</p>
                    </div>
                    <div class="bg-white p-8 rounded-xl shadow-md border border-gray-200 text-center">
                        <div class="text-5xl mb-4">üíî</div>
                        <h4 class="text-xl font-semibold text-gray-800 mb-2">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</h4>
                        <p class="text-gray-600">‡∏Å‡∏£‡∏ì‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°‡πÑ‡∏î‡πâ ‡∏ó‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô <strong class="text-red-500">5 ‡πÄ‡∏ó‡πà‡∏≤</strong> ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ä‡πà‡∏≤</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16 bg-white" id="women">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8" id="women-product-list">
                    </div>
            </div>
        </section>

        <section class="py-16 bg-white" id="men">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8" id="men-product-list">
                    </div>
            </div>
        </section>
    </main>

    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h3>
                <button id="closeLogin" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" id="loginEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="loginPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                </div>
                <button type="submit" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                <p class="text-center text-gray-600 mt-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a href="#" id="showRegister" class="text-purple-600 hover:underline">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a></p>
            </form>
        </div>
    </div>

    <div id="registerModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
                <button id="closeRegister" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <form id="registerForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                    <input type="text" id="registerName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" id="registerEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="registerPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                </div>
                <button type="submit" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                <p class="text-center text-gray-600 mt-4">‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? <a href="#" id="showLogin" class="text-purple-600 hover:underline">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a></p>
            </form>
        </div>
    </div>

    <div id="editProfileModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</h3>
                <button id="closeEditProfile" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <form id="editProfileForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                    <input type="text" id="editName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" id="editEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                    <input type="password" id="editPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600">
                </div>
                <button type="submit" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</button>
            </form>
        </div>
    </div>
    
    <div id="cartModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-lg w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                <button id="closeCart" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <div id="cartItemsContainer" class="max-h-96 overflow-y-auto mb-4">
                 <p id="emptyCartMsg" class="text-gray-500 text-center">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</p>
            </div>
             <div class="border-t pt-4">
                <div class="flex justify-between items-center text-xl font-bold">
                    <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
                    <span id="cartTotal">‡∏ø0</span>
                </div>
                <button id="checkoutButton" class="mt-4 w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
            </div>
        </div>
    </div>

    <div id="checkoutModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ä‡πà‡∏≤</h3>
                <button id="closeCheckout" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <div id="checkoutSummary" class="mb-6 border-b pb-4">
            </div>
            <form id="paymentForm">
                <h4 class="text-lg font-semibold mb-3">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h4>
                <div class="space-y-3">
                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50">
                        <input type="radio" name="paymentMethod" value="cod" class="mr-3" checked>
                        <span>‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Cash on Delivery)</span>
                    </label>
                    <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50">
                        <input type="radio" name="paymentMethod" value="transfer" class="mr-3">
                        <span>‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (Bank Transfer)</span>
                    </label>
                </div>
                <div id="bankInfo" class="hidden mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg text-sm">
                    <p class="font-bold">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏≤‡∏ó‡∏µ‡πà:</p>
                    <p>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: ‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</p>
                    <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏£‡∏ô‡∏ó‡∏±‡∏• ‡∏à‡∏≥‡∏Å‡∏±‡∏î</p>
                    <p>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: 123-4-56789-0</p>
                </div>
                <button type="submit" class="mt-6 w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠</button>
            </form>
        </div>
    </div>
    
    <div id="addressModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</h3>
                <button id="closeAddress" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <form id="addressForm">
                <div class="mb-3">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö</label>
                    <input type="text" class="w-full px-3 py-2 border rounded-lg" required>
                </div>
                <div class="mb-3">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                    <textarea class="w-full px-3 py-2 border rounded-lg" rows="3" required></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                    <input type="tel" class="w-full px-3 py-2 border rounded-lg" required>
                </div>
                <button type="submit" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</button>
            </form>
        </div>
    </div>

    <div id="thankYouModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-12 text-center max-w-md w-full">
            <h3 class="text-3xl font-bold text-green-500 mb-4">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞!</h3>
            <p class="text-gray-700 mb-6">‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ä‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏£‡∏µ‡∏ö‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
            <button id="closeThankYou" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        </div>
    </div>
    
    <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">Admin Login</h3>
                <button id="closeAdminLogin" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <form id="adminLoginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                    <input type="text" id="adminUsername" class="w-full px-3 py-2 border rounded-lg" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="adminPassword" class="w-full px-3 py-2 border rounded-lg" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            </form>
        </div>
    </div>
    
    <div id="adminDashboardModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-4xl w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Dashboard)</h3>
                <button id="closeAdminDashboard" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[60vh] overflow-y-auto pr-4">
                <div>
                    <h4 class="text-lg font-semibold mb-3 border-b pb-2">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å (Available)</h4>
                    <div id="stockList" class="space-y-3 text-sm">
                    </div>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-3 border-b pb-2">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏ä‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà (Rented)</h4>
                    <div id="rentedList" class="space-y-3 text-sm">
                    </div>
                </div>
            </div>
            <div class="mt-6 border-t pt-4 flex justify-between items-center">
                 <button id="addNewProductButton" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button> 
                <button id="adminLogoutButton" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Admin</button>
            </div>
        </div>
    </div>
    
    <div id="addProductModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-lg w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h3>
                <button id="closeAddProduct" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <form id="addProductForm">
                <div class="space-y-4 max-h-[60vh] overflow-y-auto pr-2">
                    <div class="mb-3">
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        <input type="text" id="newProductName" class="w-full px-3 py-2 border rounded-lg" required>
                    </div>
                    <div class="mb-3">
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå</label>
                        <input type="text" id="newProductBrand" class="w-full px-3 py-2 border rounded-lg" required>
                    </div>
                    <div class="mb-3">
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                        <select id="newProductCategory" class="w-full px-3 py-2 border rounded-lg" required>
                            <option value="women">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á</option>
                            <option value="men">‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ä‡πà‡∏≤/3 ‡∏ß‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" min="1" id="newProductPrice" class="w-full px-3 py-2 border rounded-lg" required>
                    </div>
                    <div class="mb-3">
                        <label class="block text-gray-700 text-sm font-bold mb-2">URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                        <input type="url" id="newProductImage" class="w-full px-3 py-2 border rounded-lg" required>
                    </div>

                    <h4 class="text-lg font-semibold mt-6 mb-3 border-t pt-4">‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Total)</h4>
                    <div class="grid grid-cols-2 gap-4" id="initialStockInputs">
                        <div class="flex items-center space-x-2">
                            <label class="w-12 text-gray-700 font-medium">S:</label>
                            <input type="number" min="0" value="0" data-size="S" class="w-full px-3 py-2 border rounded-lg initial-stock-input">
                        </div>
                         <div class="flex items-center space-x-2">
                            <label class="w-12 text-gray-700 font-medium">M:</label>
                            <input type="number" min="0" value="0" data-size="M" class="w-full px-3 py-2 border rounded-lg initial-stock-input">
                        </div>
                         <div class="flex items-center space-x-2">
                            <label class="w-12 text-gray-700 font-medium">L:</label>
                            <input type="number" min="0" value="0" data-size="L" class="w-full px-3 py-2 border rounded-lg initial-stock-input">
                        </div>
                         <div class="flex items-center space-x-2">
                            <label class="w-12 text-gray-700 font-medium">XL:</label>
                            <input type="number" min="0" value="0" data-size="XL" class="w-full px-3 py-2 border rounded-lg initial-stock-input">
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏£‡∏ß‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÑ‡∏ã‡∏™‡πå (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏à‡∏∞‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô 0)</p>
                </div>
                
                <div class="mt-6 border-t pt-4">
                    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="orderHistoryModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-8 max-w-2xl w-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤</h3>
                <button id="closeOrderHistory" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
            </div>
            <div id="orderHistoryContent" class="max-h-96 overflow-y-auto space-y-4">
                <p class="text-gray-500 text-center" id="emptyOrderHistoryMsg">‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤</p>
            </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {

        let userDatabase = []; 
        
        let productDatabase = [
            { id: 1, category: 'women', name: '‡πÄ‡∏î‡∏£‡∏™‡∏™‡∏±‡πâ‡∏ô‡∏•‡∏≤‡∏¢‡∏î‡∏≠‡∏Å', brand: 'Pomelo', price: 190, imageUrl: 'https://img.lazcdn.com/g/p/4145bb1065cf1ab997a392cc67cfbe18.jpg_720x720q80.jpg', inventory: { 'S': { total: 3, rented: 0 }, 'M': { total: 3, rented: 0 } }, rentals: [] },
            { id: 2, category: 'women', name: '‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á‡∏¢‡∏µ‡∏ô‡∏™‡πå‡∏Ç‡∏≤‡∏Å‡∏ß‡πâ‡∏≤‡∏á', brand: 'Levi\'s', price: 200, imageUrl: 'https://img.lazcdn.com/g/p/45854c6581e9d27e4f863b20752f91a8.jpg_720x720q80.jpg', inventory: { 'S': { total: 2, rented: 0 }, 'M': { total: 3, rented: 0 }, 'L': { total: 2, rented: 0 } }, rentals: [] },
            { id: 3, category: 'women', name: '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏≠‡∏õ‡πÑ‡∏´‡∏°‡∏û‡∏£‡∏°', brand: 'Zara', price: 150, imageUrl: 'https://cdn.pomelofashion.com/img/p/5/7/8/9/3/9/578939.jpg', inventory: { 'S': { total: 5, rented: 0 }, 'M': { total: 5, rented: 0 } }, rentals: [] },
            { id: 4, category: 'women', name: '‡πÄ‡∏ö‡∏•‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏•‡∏≥‡∏•‡∏≠‡∏á', brand: 'H&M', price: 199, imageUrl: 'https://inwfile.com/s-cq/4rzsqw.jpg', inventory: { 'M': { total: 2, rented: 0 }, 'L': { total: 2, rented: 0 } }, rentals: [] },
            { id: 5, category: 'women', name: '‡∏Å‡∏£‡∏∞‡πÇ‡∏õ‡∏£‡∏á‡∏¢‡∏≤‡∏ß‡∏ú‡πâ‡∏≤‡∏ã‡∏≤‡∏ï‡∏¥‡∏ô', brand: 'Topshop', price: 180, imageUrl: 'https://laz-img-sg.alicdn.com/p/01f672f4c747b16e89fddba921a4dec2.jpg', inventory: { 'S': { total: 3, rented: 0 }, 'M': { total: 2, rented: 0 } }, rentals: [] },
            { id: 6, category: 'men', name: '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡∏¥‡πâ‡∏ï‡πÅ‡∏Ç‡∏ô‡∏™‡∏±‡πâ‡∏ô', brand: 'Uniqlo', price: 160, imageUrl: 'https://img.lazcdn.com/g/p/c2946a4fb5a5005d4e37c3d2b03f7cb1.jpg_720x720q80.jpg', inventory: { 'M': { total: 5, rented: 0 }, 'L': { total: 5, rented: 0 } }, rentals: [] },
            { id: 7, category: 'men', name: '‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á‡∏ä‡∏¥‡πÇ‡∏ô', brand: 'Gap', price: 190, imageUrl: 'https://www.khakibros.com/pub/media/catalog/product/cache/9e987a67928cb5ca42d63dba75e70807/w/e/web_b005-3.jpg', inventory: { 'M': { total: 4, rented: 0 }, 'L': { total: 4, rented: 0 }, 'XL': { total: 2, rented: 0 } }, rentals: [] },
            { id: 8, category: 'men', name: '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Æ‡∏π‡πâ‡∏î‡∏î‡∏µ‡πâ', brand: 'Adidas', price: 200, imageUrl: 'https://d29c1z66frfv6c.cloudfront.net/pub/media/catalog/product/zoom/162b782baff20aa8a9858edb12cff8444c53b9d7_xxl-1.jpg', inventory: { 'L': { total: 3, rented: 0 }, 'XL': { total: 3, rented: 0 } }, rentals: [] },
            { id: 9, category: 'men', name: '‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á‡∏¢‡∏µ‡∏ô‡∏™‡πå', brand: 'Lee', price: 199, imageUrl: 'https://cdn.shopify.com/s/files/1/0637/1423/0450/files/Mens_Loose.jpg', inventory: { 'M': { total: 4, rented: 0 }, 'L': { total: 3, rented: 0 } }, rentals: [] },
            { id: 10, category: 'men', name: '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•', brand: 'Lacoste', price: 180, imageUrl: 'https://www.phufa.org/wp-content/uploads/2025/09/ext-773.jpg', inventory: { 'M': { total: 5, rented: 0 }, 'L': { total: 5, rented: 0 }, 'XL': { total: 2, rented: 0 } }, rentals: [] },
        ];

        let loggedInUser = null;
        let isAdminLoggedIn = false;
        let cart = [];

        const userButton = document.getElementById('userButton');
        const userDropdown = document.getElementById('userDropdown');
        const logoutButton = document.getElementById('logoutButton');
        const adminLogoutButton = document.getElementById('adminLogoutButton');
        const cartCounter = document.getElementById('cartCounter');
        const checkoutButton = document.getElementById('checkoutButton');
        const emptyCartMsg = document.getElementById('emptyCartMsg');
        const bankInfoBox = document.getElementById('bankInfo');
        const searchInput = document.getElementById('searchInput'); 
        const searchButton = document.getElementById('searchButton');
        const orderHistoryLink = document.getElementById('orderHistoryLink');
        const emptyOrderHistoryMsg = document.getElementById('emptyOrderHistoryMsg');
        const stockList = document.getElementById('stockList'); 
        const addNewProductButton = document.getElementById('addNewProductButton'); // **NEW**

        
        const modals = {
            login: document.getElementById('loginModal'),
            register: document.getElementById('registerModal'),
            editProfile: document.getElementById('editProfileModal'),
            cart: document.getElementById('cartModal'),
            adminLogin: document.getElementById('adminLoginModal'),
            adminDashboard: document.getElementById('adminDashboardModal'),
            checkout: document.getElementById('checkoutModal'),
            address: document.getElementById('addressModal'),
            thankYou: document.getElementById('thankYouModal'),
            orderHistory: document.getElementById('orderHistoryModal'), 
            addProduct: document.getElementById('addProductModal'), // **NEW**
        };

        const openModal = (modalName) => modals[modalName]?.classList.remove('hidden');
        const closeModal = (modalName) => modals[modalName]?.classList.add('hidden');
        
        const updateUIForLogin = (user) => {
            loggedInUser = user;
            userButton.textContent = user.name;
            closeModal('login');
            closeModal('register');
        };
        
        const updateUIForLogout = () => {
            loggedInUser = null;
            if (isAdminLoggedIn) {
                isAdminLoggedIn = false;
                alert('‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å');
            }
            userButton.textContent = '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
            userDropdown.classList.add('hidden');
        };

        const updateCartCounter = () => {
            cartCounter.textContent = cart.length;
            checkoutButton.disabled = cart.length === 0;
            emptyCartMsg.style.display = cart.length === 0 ? 'block' : 'none';
        };

        const calculatePrice = (basePrice, days) => {
             const baseDays = 3;
             const pricePerDay = basePrice / baseDays;
             return Math.round(pricePerDay * days);
        };
        
        const renderProducts = (containerId, productsToRender) => {
            const productListEl = document.getElementById(containerId);
            if (!productListEl) return;
            productListEl.innerHTML = '';
            
            let products = productsToRender;

            if (products.length === 0) {
                 productListEl.innerHTML = `<p class="text-gray-500 col-span-5 text-center p-8">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>`;
                 return;
            }

            products.forEach(product => {
                let availableSizes = Object.keys(product.inventory).filter(size => product.inventory[size].total > product.inventory[size].rented);
                const isCompletelyOutOfStock = availableSizes.length === 0;

                const newProductCard = document.createElement('div');
                newProductCard.className = `bg-white rounded-xl shadow-lg overflow-hidden card-hover product-card ${isCompletelyOutOfStock ? 'opacity-50' : ''}`;
                
                let sizeOptions = availableSizes.map(size => `<option value="${size}">${size.toUpperCase()}</option>`).join('');

                newProductCard.innerHTML = `
                    <div class="h-64 flex items-center justify-center overflow-hidden relative bg-gray-200">
                         <img src="${product.imageUrl}" class="w-full h-full object-cover" alt="${product.name}" loading="lazy">
                         ${isCompletelyOutOfStock ? `<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"><span class="text-white font-bold text-xl">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î</span></div>` : ''}
                    </div>
                    <div class="p-6">
                        <h4 class="font-semibold text-lg mb-2 product-name">${product.name}</h4>
                        <p class="text-gray-600 text-sm mb-3 product-details">‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå ${product.brand}</p>
                        <div class="mb-2">
                            <label class="block text-gray-700 text-sm font-semibold mb-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ã‡∏™‡πå</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg productSize" ${isCompletelyOutOfStock ? 'disabled' : ''}>
                                ${sizeOptions ? sizeOptions : '<option>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î</option>'}
                            </select>
                        </div>
                        <div class="mb-2">
                            <label class="block text-gray-700 text-sm font-semibold mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°</label>
                            <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg rentStartDate" ${isCompletelyOutOfStock ? 'disabled' : ''}>
                        </div>
                        <div class="mb-2">
                            <label class="block text-gray-700 text-sm font-semibold mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πà‡∏≤</label>
                            <input type="number" min="1" value="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg rentDays" ${isCompletelyOutOfStock ? 'disabled' : ''}>
                        </div>
                        <div class="flex items-center justify-between mt-2">
                            <div>
                                <span class="text-2xl font-bold text-purple-600 product-price" data-base-price="${product.price}">‡∏ø${product.price}</span>
                                <span class="text-sm text-gray-500 price-duration">/3 ‡∏ß‡∏±‡∏ô</span>
                            </div>
                            <button data-product-id="${product.id}" class="rent-button bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400" ${isCompletelyOutOfStock ? 'disabled' : ''}>‡πÄ‡∏ä‡πà‡∏≤</button>
                        </div>
                    </div>
                `;
                productListEl.appendChild(newProductCard);
            });
        };

        const displayAllProducts = () => {
            renderProducts('women-product-list', productDatabase.filter(p => p.category === 'women'));
            renderProducts('men-product-list', productDatabase.filter(p => p.category === 'men'));
        }

        const renderOrderHistory = () => {
            const container = document.getElementById('orderHistoryContent');
            container.innerHTML = '';
            
            if (!loggedInUser) {
                 container.innerHTML = '<p class="text-red-500 text-center">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤</p>';
                 return;
            }
            
            let historyFound = false;
            
            productDatabase.forEach(product => {
                product.rentals.forEach(rental => {
                    if (rental.rentedBy === loggedInUser.name) {
                        const historyItemEl = document.createElement('div');
                        historyItemEl.className = 'p-4 border rounded-lg shadow-sm bg-purple-50';
                        
                        historyItemEl.innerHTML = `
                            <p class="font-bold text-gray-800">${product.name} (‡πÑ‡∏ã‡∏™‡πå ${rental.size.toUpperCase()})</p>
                            <p class="text-sm text-gray-600">‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${rental.rentUntil}</p>
                            <p class="text-xs text-green-600 font-medium">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏ñ‡∏π‡∏Å‡πÄ‡∏ä‡πà‡∏≤ (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)</p>
                        `;
                        container.appendChild(historyItemEl);
                        historyFound = true;
                    }
                });
            });

            if (!historyFound) {
                 container.appendChild(emptyOrderHistoryMsg);
            }
        };


        const renderCartItems = () => {
            const container = document.getElementById('cartItemsContainer');
            const cartTotalEl = document.getElementById('cartTotal');
            container.innerHTML = ''; 

            if (cart.length === 0) {
                 container.appendChild(emptyCartMsg);
            }
            let total = 0;
            cart.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'flex justify-between items-center mb-2 p-2 border-b';
                itemEl.innerHTML = `
                    <div>
                        <p class="font-semibold">${item.name} (‡πÑ‡∏ã‡∏™‡πå ${item.size.toUpperCase()})</p>
                        <p class="text-sm text-gray-500">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${item.startDate}, ${item.days} ‡∏ß‡∏±‡∏ô</p>
                    </div>
                    <div class="flex items-center">
                        <span class="font-semibold mr-4">‡∏ø${item.price}</span>
                        <button data-index="${index}" class="remove-from-cart text-red-500 hover:text-red-700 text-2xl">&times;</button>
                    </div>
                `;
                container.appendChild(itemEl);
                total += item.price;
            });
            cartTotalEl.textContent = `‡∏ø${total}`;
            updateCartCounter();
        };

        const renderAdminDashboard = () => {
            const rentedListEl = document.getElementById('rentedList');
            stockList.innerHTML = ''; 
            rentedListEl.innerHTML = '';

            let allRentals = [];

            productDatabase.forEach(p => {
                const stockItemEl = document.createElement('div');
                stockItemEl.className = 'p-3 border rounded-md bg-white shadow-sm';
                
                // Re-rendering the stock list with management UI
                let sizeDetailsHtml = Object.entries(p.inventory).map(([size, data]) => {
                    const availableStock = data.total - data.rented;
                    return `
                        <div class="flex flex-col md:flex-row items-start md:items-center justify-between py-2 border-t mt-1 pt-1 first:border-t-0 first:mt-0 first:pt-0">
                            <span class="font-medium w-full md:w-32">${size.toUpperCase()} (‡∏ß‡πà‡∏≤‡∏á: ${availableStock}/${data.total})</span>
                            <div class="flex items-center space-x-2 mt-2 md:mt-0 w-full md:w-auto">
                                <input type="number" min="1" value="1" id="qty-${p.id}-${size}" class="w-16 px-2 py-1 border rounded-md text-sm text-center">
                                <button data-product-id="${p.id}" data-size="${size}" data-action="add" class="add-stock-btn bg-green-500 text-white px-3 py-1 rounded-md text-xs hover:bg-green-600 transition-colors">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                                <button data-product-id="${p.id}" data-size="${size}" data-action="remove" class="remove-stock-btn bg-red-500 text-white px-3 py-1 rounded-md text-xs hover:bg-red-600 transition-colors">‡∏•‡∏ö</button>
                            </div>
                        </div>
                    `;
                }).join('');
                
                stockItemEl.innerHTML = `<p class="font-bold text-base mb-2 text-gray-800">${p.name} (‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå: ${p.brand})</p>${sizeDetailsHtml}`;
                stockList.appendChild(stockItemEl);

                p.rentals.forEach(rental => allRentals.push({productName: p.name, ...rental}));
            });

            if (allRentals.length > 0) {
                allRentals.forEach(r => {
                    const rentedItemEl = document.createElement('div');
                    rentedItemEl.className = 'p-3 border rounded-md bg-yellow-50';
                    rentedItemEl.innerHTML = `<p class="font-semibold">${r.productName} (‡πÑ‡∏ã‡∏™‡πå ${r.size.toUpperCase()})</p><p class="text-xs text-gray-500">‡πÄ‡∏ä‡πà‡∏≤‡πÇ‡∏î‡∏¢: ${r.rentedBy} | ‡∏Ñ‡∏∑‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${r.rentUntil}</p>`;
                    rentedListEl.appendChild(rentedItemEl);
                });
            }

            if (stockList.innerHTML === '') stockList.innerHTML = '<p class="text-gray-400">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å</p>';
            if (rentedListEl.innerHTML === '') rentedListEl.innerHTML = '<p class="text-gray-400">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡πÄ‡∏ä‡πà‡∏≤</p>';
        };

        // --- Event Listeners for Modals and Features ---

        document.getElementById('adminButton').addEventListener('click', (e) => {
            e.preventDefault();
            if (isAdminLoggedIn) {
                renderAdminDashboard();
                openModal('adminDashboard');
            } else {
                openModal('adminLogin');
            }
        });
        
        // **NEW** Handle closing of AddProduct Modal and re-opening Dashboard
        const handleCloseAddProduct = () => {
            closeModal('addProduct');
            if (isAdminLoggedIn) {
                renderAdminDashboard();
                openModal('adminDashboard');
            }
        };
        document.getElementById('closeAddProduct').addEventListener('click', handleCloseAddProduct);
        modals.addProduct.addEventListener('click', (e) => { 
            if (e.target === modals.addProduct) handleCloseAddProduct();
        });


        // **NEW** Open Add Product Modal
        addNewProductButton.addEventListener('click', (e) => {
             e.preventDefault();
             closeModal('adminDashboard'); // Close dashboard temporarily
             openModal('addProduct'); // Open new product form
        });
        
        // **NEW** Submit Add Product Form
        document.getElementById('addProductForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const newName = document.getElementById('newProductName').value.trim();
            const newBrand = document.getElementById('newProductBrand').value.trim();
            const newCategory = document.getElementById('newProductCategory').value;
            const newPrice = parseInt(document.getElementById('newProductPrice').value);
            const newImage = document.getElementById('newProductImage').value.trim();

            const initialStockInputs = document.querySelectorAll('.initial-stock-input');
            let newInventory = {};
            let hasStock = false;

            initialStockInputs.forEach(input => {
                const size = input.dataset.size;
                const total = parseInt(input.value) || 0;
                if (total > 0) {
                    newInventory[size] = { total: total, rented: 0 };
                    hasStock = true;
                }
            });
            
            if (!hasStock) {
                 alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÑ‡∏ã‡∏™‡πå');
                 return;
            }
            
            const newId = productDatabase.length > 0 ? productDatabase[productDatabase.length - 1].id + 1 : 1;
            
            const newProduct = {
                id: newId, 
                category: newCategory, 
                name: newName, 
                brand: newBrand, 
                price: newPrice, 
                imageUrl: newImage, 
                inventory: newInventory, 
                rentals: [] 
            };

            productDatabase.push(newProduct);
            
            // Reset form
            document.getElementById('addProductForm').reset();

            alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${newName}" ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
            
            // Close the form and re-open the dashboard
            handleCloseAddProduct();
            
            // Refresh customer view
            displayAllProducts(); 
        });

        // Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÉ‡∏ô Admin Dashboard
        stockList.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-stock-btn') || e.target.classList.contains('remove-stock-btn')) {
                const button = e.target;
                const productId = parseInt(button.dataset.productId);
                const size = button.dataset.size;
                const action = button.dataset.action;
                
                // Get quantity from the input field right next to the button
                const qtyInput = document.getElementById(`qty-${productId}-${size}`);
                const quantity = parseInt(qtyInput.value) || 0;
                
                if (quantity <= 0) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0');
                    return;
                }

                const product = productDatabase.find(p => p.id === productId);
                if (!product || !product.inventory[size]) return;

                const inventory = product.inventory[size];
                
                if (action === 'add') {
                    inventory.total += quantity;
                    alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ï‡πá‡∏≠‡∏Å ${quantity} ‡∏ï‡∏±‡∏ß ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${product.name} ‡πÑ‡∏ã‡∏™‡πå ${size.toUpperCase()} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);
                } else if (action === 'remove') {
                    if (inventory.total - quantity < inventory.rented) {
                        alert(`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÑ‡∏î‡πâ! ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏ä‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà (${inventory.rented}) ‡∏à‡∏∞‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠`);
                        return;
                    }
                    inventory.total -= quantity;
                    if (inventory.total < 0) inventory.total = 0; 
                    alert(`‡∏•‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å ${quantity} ‡∏ï‡∏±‡∏ß ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${product.name} ‡πÑ‡∏ã‡∏™‡πå ${size.toUpperCase()} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`);
                }

                // Refresh UI for both admin and customer views
                renderAdminDashboard();
                displayAllProducts();
            }
        });

        adminLogoutButton.addEventListener('click', () => {
            isAdminLoggedIn = false;
            closeModal('adminDashboard');
            alert('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        });

        document.getElementById('userButton').addEventListener('click', (e) => {
             e.preventDefault();
             if (!loggedInUser) openModal('login');
        });

        document.getElementById('editProfileLink').addEventListener('click', (e) => { e.preventDefault(); openModal('editProfile'); });
        document.getElementById('cartButton').addEventListener('click', (e) => { e.preventDefault(); openModal('cart'); });
        
        orderHistoryLink.addEventListener('click', (e) => { 
            e.preventDefault(); 
            if (!loggedInUser) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤');
                openModal('login');
                return;
            }
            renderOrderHistory();
            openModal('orderHistory'); 
        });

        // Close modal listeners
        document.getElementById('closeLogin').addEventListener('click', () => closeModal('login'));
        document.getElementById('closeRegister').addEventListener('click', () => closeModal('register'));
        document.getElementById('closeEditProfile').addEventListener('click', () => closeModal('editProfile'));
        document.getElementById('closeCart').addEventListener('click', () => closeModal('cart'));
        document.getElementById('closeAdminLogin').addEventListener('click', () => closeModal('adminLogin'));
        document.getElementById('closeAdminDashboard').addEventListener('click', () => closeModal('adminDashboard'));
        document.getElementById('closeCheckout').addEventListener('click', () => closeModal('checkout'));
        document.getElementById('closeAddress').addEventListener('click', () => closeModal('address'));
        document.getElementById('closeOrderHistory').addEventListener('click', () => closeModal('orderHistory'));
        document.getElementById('closeThankYou').addEventListener('click', () => {
            closeModal('thankYou');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        Object.values(modals).forEach(modal => {
            modal?.addEventListener('click', (e) => { if (e.target === modal) modal.classList.add('hidden'); });
        });
        
        userButton.addEventListener('click', () => {
            if (loggedInUser) userDropdown.classList.toggle('hidden');
        });

        logoutButton.addEventListener('click', (e) => { e.preventDefault(); alert('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!'); updateUIForLogout(); });

        document.getElementById('showRegister').addEventListener('click', (e) => { e.preventDefault(); closeModal('login'); openModal('register'); });
        document.getElementById('showLogin').addEventListener('click', (e) => { e.preventDefault(); closeModal('register'); openModal('login'); });

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const loginEmail = document.getElementById('loginEmail').value;
            const loginPass = document.getElementById('loginPassword').value;

            const foundUser = userDatabase.find(user => user.email === loginEmail);

            if (foundUser && foundUser.password === loginPass) {
                alert(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì ${foundUser.name}!`);
                updateUIForLogin(foundUser);
            } else {
                alert('‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            }
        });

        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const registerName = document.getElementById('registerName').value;
            const registerEmail = document.getElementById('registerEmail').value;
            const registerPassword = document.getElementById('registerPassword').value;

            const existingUser = userDatabase.find(user => user.email === registerEmail);

            if (existingUser) {
                alert('‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏≠‡∏∑‡πà‡∏ô');
                return;
            }

            const newUser = { name: registerName, email: registerEmail, password: registerPassword };
            userDatabase.push(newUser);
            
            alert(`‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì ${registerName}!`);
            updateUIForLogin(newUser);
        });

        document.getElementById('editProfileForm').addEventListener('submit', (e) => {
            e.preventDefault();
            loggedInUser.name = document.getElementById('editName').value;
            userButton.textContent = loggedInUser.name;
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            closeModal('editProfile');
        });

        document.getElementById('adminLoginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const user = document.getElementById('adminUsername').value;
            const pass = document.getElementById('adminPassword').value;
            if (user === 'Admin' && pass === '123456') {
                isAdminLoggedIn = true;
                alert('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                closeModal('adminLogin');
                renderAdminDashboard();
                openModal('adminDashboard');
            } else {
                alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            }
        });
        
        checkoutButton.addEventListener('click', () => {
            if (!loggedInUser) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠');
                openModal('login');
                return;
            }
            if (cart.length > 0) {
                const summaryEl = document.getElementById('checkoutSummary');
                const total = cart.reduce((sum, item) => sum + item.price, 0);
                summaryEl.innerHTML = `<p class="text-gray-600">‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡πÄ‡∏ä‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${cart.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p><p class="text-xl font-bold mt-2">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: ‡∏ø${total}</p>`;
                closeModal('cart');
                openModal('checkout');
            }
        });

        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                bankInfoBox.classList.toggle('hidden', e.target.value !== 'transfer');
            });
        });

        document.getElementById('paymentForm').addEventListener('submit', (e) => {
            e.preventDefault();
            closeModal('checkout');
            openModal('address');
        });

        document.getElementById('addressForm').addEventListener('submit', (e) => {
            e.preventDefault();
            cart.forEach(cartItem => {
                const product = productDatabase.find(p => p.id === cartItem.id);
                if (product && product.inventory[cartItem.size]) {
                    product.inventory[cartItem.size].rented++;
                    let returnDate = new Date(cartItem.startDate);
                    returnDate.setDate(returnDate.getDate() + cartItem.days);
                    product.rentals.push({
                        rentedBy: loggedInUser.name,
                        size: cartItem.size,
                        rentUntil: returnDate.toLocaleDateString('th-TH')
                    });
                }
            });

            cart = [];
            renderCartItems();
            displayAllProducts(); // Re-render after successful rental
            closeModal('address');
            openModal('thankYou');
        });
        
        document.querySelectorAll('#women-product-list, #men-product-list').forEach(container => {
            container.addEventListener('input', (e) => {
                if (e.target.classList.contains('rentDays')) {
                    const card = e.target.closest('.product-card');
                    const priceEl = card.querySelector('.product-price');
                    const durationEl = card.querySelector('.price-duration');
                    const basePrice = parseInt(priceEl.dataset.basePrice);
                    const days = parseInt(e.target.value) || 1;
                    const newPrice = calculatePrice(basePrice, days);
                    priceEl.textContent = `‡∏ø${newPrice}`;
                    durationEl.textContent = `/${days} ‡∏ß‡∏±‡∏ô`;
                }
            });

            container.addEventListener('click', (e) => {
                if (e.target.classList.contains('rent-button')) {
                    if (!loggedInUser) {
                        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤');
                        openModal('login');
                        return;
                    }
                    const card = e.target.closest('.product-card');
                    const productId = parseInt(e.target.dataset.productId);
                    const product = productDatabase.find(p => p.id === productId);

                    const selectedSize = card.querySelector('.productSize').value;
                    if (!selectedSize || selectedSize === '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î') {
                        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ã‡∏™‡πå‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á');
                        return;
                    }
                    
                    const startDate = card.querySelector('.rentStartDate').value;
                    if (!startDate) {
                        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ä‡πà‡∏≤');
                        return;
                    }
                    const days = parseInt(card.querySelector('.rentDays').value);
                    const priceText = card.querySelector('.product-price').textContent;
                    const price = parseInt(priceText.replace('‡∏ø', ''));

                    cart.push({ id: productId, name: product.name, size: selectedSize, startDate, days, price });
                    alert(`‡πÄ‡∏û‡∏¥‡πà‡∏° '${product.name} (‡πÑ‡∏ã‡∏™‡πå ${selectedSize.toUpperCase()})' ‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß`);
                    renderCartItems();
                }
            });
        });

        document.getElementById('cartItemsContainer').addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-from-cart')) {
                cart.splice(e.target.dataset.index, 1);
                renderCartItems();
            }
        });
        
        searchButton.addEventListener('click', (e) => {
            e.preventDefault();
            searchInput.classList.toggle('hidden');
            if (!searchInput.classList.contains('hidden')) {
                searchInput.focus();
            } else {
                searchInput.value = '';
                displayAllProducts(); 
            }
        });

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase().trim();
            if (searchTerm === '') { 
                displayAllProducts(); 
                return; 
            }
            
            const filteredProducts = productDatabase.filter(p => 
                p.name.toLowerCase().includes(searchTerm) || 
                p.brand.toLowerCase().includes(searchTerm) || 
                p.category.toLowerCase().includes(searchTerm)
            );
            
            // Re-render both sections with filtered results
            renderProducts('women-product-list', filteredProducts.filter(p => p.category === 'women'));
            renderProducts('men-product-list', filteredProducts.filter(p => p.category === 'men'));
        });
        
        // Initial setup
        displayAllProducts();
        updateCartCounter();
    });
    </script>
</body>
</html>
